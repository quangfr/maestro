<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <title>Prototype Induction Planning ‚Äì 5 √©tapes</title>
    <style>
        :root {
            --bg: #fbfbff;
            --card: #ffffff;
            --accent: #3b82f6;
            --accent-soft: rgba(59, 130, 246, 0.18);
            --accent-ok: #22c55e;
            --accent-warn: #fb923c;
            --text: #0f172a;
            --muted: #94a3b8;
            --border: #e5e7eb;
            --radius-lg: 16px;
            --radius-pill: 999px;
            --shadow-soft: 0 12px 30px rgba(15, 23, 42, 0.08);
            --transition-fast: 0.2s ease-out;
            --font-main: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background: #fbfbff;
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 32px 16px;
        }

        .app {
            width: 100%;
            max-width: 1080px;
            background: #ffffff;
            border-radius: 26px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-soft);
            padding: 24px 28px 28px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 18px;
            gap: 12px;
        }

        header h1 {
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        header h1 span.badge {
            font-size: 0.8rem;
            padding: 4px 10px;
            border-radius: var(--radius-pill);
            background: rgba(37, 99, 235, 0.15);
            color: var(--accent);
            border: 1px solid rgba(37, 99, 235, 0.35);
        }

        header p {
            font-size: 0.85rem;
            color: var(--muted);
        }

        .stepper {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 4px;
        }

        .step-pill {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: var(--radius-pill);
            border: 1px solid var(--border);
            font-size: 0.8rem;
            color: var(--muted);
            background: #f8fafc;
            white-space: nowrap;
            transition: var(--transition-fast);
        }

        .step-pill span.index {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: #e2e8f0;
            border: 1px solid var(--border);
            font-size: 0.75rem;
            color: var(--text);
        }

        .step-pill.active {
            border-color: var(--accent);
            background: rgba(37, 99, 235, 0.12);
            color: var(--text);
        }

        .step-pill.active span.index {
            background: var(--accent);
            color: #fff;
            border-color: var(--accent);
        }

        .step-pill.done {
            border-color: rgba(22, 163, 74, 0.45);
            background: rgba(22, 163, 74, 0.08);
            color: var(--accent-ok);
        }

        .step-pill.done span.index {
            background: var(--accent-ok);
            color: #fff;
            border-color: var(--accent-ok);
        }

        .steps-container {
            position: relative;
        }

        .step {
            display: none;
            gap: 16px;
            margin-bottom: 16px;
            animation: fadeInUp 0.25s ease-out;
        }

        .step.active {
            display: grid;
        }

        @media (min-width: 860px) {
            .step {
                grid-template-columns: 7fr 5fr;
            }
        }

        @media (max-width: 859px) {
            .step {
                grid-template-columns: 1fr;
            }
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .card {
            background: var(--card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
            padding: 14px 14px 16px;
            position: relative;
            overflow: hidden;
        }

        .card h2 {
            font-size: 0.95rem;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .card h2 span.label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--muted);
        }

        .card small {
            font-size: 0.75rem;
            color: var(--muted);
        }

        .card-section-title {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #92400e;
            margin-bottom: 8px;
            background: #fef3c7;
            padding: 4px 10px;
            border-radius: 12px;
        }

        .field {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 8px;
        }

        .field label {
            font-size: 0.8rem;
            color: var(--muted);
        }

        .field-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        input[type="text"],
        input[type="number"],
        input[type="month"],
        select {
            background: #fdfdff;
            border-radius: 10px;
            border: 1px solid var(--border);
            color: var(--text);
            padding: 6px 9px;
            font-size: 0.85rem;
            outline: none;
            min-height: 32px;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        input[type="month"]:focus,
        select:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.45);
        }

        input[type="range"] {
            width: 100%;
            accent-color: var(--accent);
        }

        .pill-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 4px;
        }

        .pill {
            font-size: 0.8rem;
            padding: 3px 9px;
            border-radius: var(--radius-pill);
            border: 1px solid var(--border);
            color: var(--muted);
            background: #fdfdff;
        }

        .pill.accent {
            border-color: rgba(37, 99, 235, 0.6);
            color: var(--accent);
            background: rgba(37, 99, 235, 0.08);
        }

        .pill.soft-ok {
            border-color: rgba(22, 163, 74, 0.6);
            color: var(--accent-ok);
            background: rgba(22, 163, 74, 0.08);
        }

        .pill.soft-warn {
            border-color: rgba(249, 115, 22, 0.6);
            color: var(--accent-warn);
            background: rgba(249, 115, 22, 0.08);
        }

        .result-block {
            font-size: 0.85rem;
            line-height: 1.5;
            padding: 8px 10px;
            border-radius: 10px;
            background: #fff7d5;
            border: 1px dashed rgba(245, 158, 11, 0.6);
            color: var(--text);
            min-height: 54px;
        }

        .result-block span.highlight {
            color: var(--accent);
        }

        .result-block span.ok {
            color: var(--accent-ok);
        }

        .result-block span.warn {
            color: var(--accent-warn);
        }

        .inline-hint {
            font-size: 0.75rem;
            color: var(--muted);
            margin-top: 2px;
        }

        .nav-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 6px;
            padding-top: 10px;
            border-top: 1px solid var(--border);
            gap: 8px;
        }

        .nav-footer small {
            font-size: 0.75rem;
            color: var(--muted);
        }

        .buttons {
            display: flex;
            gap: 8px;
        }

        button {
            border-radius: var(--radius-pill);
            border: 1px solid transparent;
            padding: 7px 14px;
            font-size: 0.8rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition-fast);
            background: transparent;
            color: var(--text);
        }

        button[disabled] {
            opacity: 0.4;
            cursor: default;
        }

        .btn-secondary {
            border-color: var(--border);
            background: #fff;
        }

        .btn-secondary:hover:not([disabled]) {
            border-color: rgba(15, 23, 42, 0.15);
        }

        .btn-primary {
            background: var(--accent);
            color: #fff;
            border-color: transparent;
            box-shadow: 0 8px 22px rgba(37, 99, 235, 0.35);
        }

        .btn-primary:hover:not([disabled]) {
            transform: translateY(-1px);
            box-shadow: 0 11px 26px rgba(37, 99, 235, 0.45);
        }

        .btn-ghost {
            border-color: rgba(148, 163, 184, 0.6);
            background: #fff;
            font-size: 0.75rem;
        }

        .badge-proba {
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: var(--radius-pill);
            border: 1px solid rgba(148, 163, 184, 0.5);
            color: var(--muted);
            background: #f8fafc;
        }

        .badge-proba span.value {
            color: var(--accent);
            font-weight: 500;
        }

        .summary-chip-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 6px;
        }

        .summary-chip {
            font-size: 0.78rem;
            padding: 4px 9px;
            border-radius: var(--radius-pill);
            border: 1px solid var(--border);
            background: #f8fafc;
            color: var(--text);
        }

        .summary-text {
            font-size: 0.9rem;
            margin-top: 6px;
            line-height: 1.6;
            color: var(--text);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(6px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <div class="app">
        <header>
            <div>
                <h1>üõ†Ô∏è Induction Journey <span class="badge">Prototype 5 √©tapes</span></h1>
                <p>De la pr√©vision de d√©pose moteur √† la demande d‚Äôinduction confirm√©e.</p>
            </div>
            <button class="btn-ghost" type="button">
                üåê Mode d√©monstration
            </button>
        </header>

        <!-- Stepper -->
        <div class="stepper" id="stepper">
            <div class="step-pill active" data-step-pill="1">
                <span class="index">1</span> Plan long terme
            </div>
            <div class="step-pill" data-step-pill="2">
                <span class="index">2</span> Horizon & probas
            </div>
            <div class="step-pill" data-step-pill="3">
                <span class="index">3</span> Workscope & slots
            </div>
            <div class="step-pill" data-step-pill="4">
                <span class="index">4</span> Ajustements planner
            </div>
            <div class="step-pill" data-step-pill="5">
                <span class="index">5</span> Demande confirm√©e
            </div>
        </div>

        <div class="steps-container">
            <!-- √âTAPE 1 -->
            <section class="step active" data-step="1">
                <div class="column">
                    <div class="card">
                        <h2>üîç √âtape 1 ‚Äì <span class="label">Induction Planning (KDD IP1)</span></h2>
                        <small>Saisir une pr√©vision de d√©pose moteur √† 3‚Äì18 mois.</small>

                        <div style="height:10px"></div>
                        <div class="card-section-title">Entr√©es</div>

                        <div class="field">
                            <label for="esn">ESN moteur</label>
                            <select id="esn">
                                <option value="">S√©lectionner un ESN‚Ä¶</option>
                                <option value="ESN-728394">ESN-728394 ‚Äì LEAP-1A ‚Äì Client A</option>
                                <option value="ESN-554201">ESN-554201 ‚Äì LEAP-1B ‚Äì Client B</option>
                                <option value="ESN-993120">ESN-993120 ‚Äì CFM56-7B ‚Äì Client C</option>
                            </select>
                        </div>

                        <div class="field-row">
                            <div class="field" style="flex:1 1 140px;">
                                <label for="engineType">Type moteur</label>
                            <select id="engineType">
                                <option value="">Choisir‚Ä¶</option>
                            </select>
                            </div>
                            <div class="field" style="flex:1 1 140px;">
                                <label for="client">Client</label>
                                <select id="client">
                                    <option value="">Choisir‚Ä¶</option>
                                    <option value="Client A">Client A</option>
                                    <option value="Client B">Client B</option>
                                    <option value="Client C">Client C</option>
                                </select>
                            </div>
                        </div>

                        <div class="field">
                            <label for="module">Type de visite / module</label>
                            <select id="module">
                                <option value="">Choisir‚Ä¶</option>
                                <option value="Full Engine">Full Engine</option>
                                <option value="Module Fan">Module Fan</option>
                                <option value="Module HPC">Module HPC</option>
                            </select>
                        </div>

                        <div class="pill-row">
                            <span class="pill accent">üéØ Candidats Induction Plan</span>
                            <span class="pill">ESN, moteur, client</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-section-title">Sorties</div>

                        <div class="field">
                            <label for="probStep1">Probabilit√© d‚Äôinduction</label>
                            <input type="range" id="probStep1" min="10" max="90" value="50" />
                            <div class="inline-hint">
                                <span class="badge-proba">Pr√©vision long terme : <span id="probStep1Label"
                                        class="value">50%</span></span>
                            </div>
                        </div>

                        <div class="field">
                            <label for="horizonMonths">Horizon (mois)</label>
                            <input type="number" id="horizonMonths" min="3" max="18" value="12" />
                            <div class="inline-hint">Entre 3 et 18 mois.</div>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card">
                        <div class="card-section-title">R√©sultat (pr√©vision cr√©√©e)</div>
                        <div class="result-block" id="resultStep1">
                            En attente de donn√©es‚Ä¶ s√©lectionne un ESN pour g√©n√©rer le plan.
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-section-title">Ajustements possibles</div>
                        <div class="field">
                            <label for="priorityStep1">Priorit√© client</label>
                            <input type="range" id="priorityStep1" min="1" max="5" value="3" />
                            <div class="inline-hint">1 = faible / 5 = critique.</div>
                        </div>
                        <div class="field">
                            <label for="shopPrefStep1">Shops pr√©f√©rentiels</label>
                            <select id="shopPrefStep1">
                                <option value="">Laisser ouvert‚Ä¶</option>
                                <option value="Shop X">Shop X (Europe)</option>
                                <option value="Shop Y">Shop Y (Am√©riques)</option>
                                <option value="Shop Z">Shop Z (Asie)</option>
                            </select>
                        </div>
                        <div class="result-block" id="adjustStep1">
                            Ajuste la priorit√© ou le shop pour voir l‚Äôimpact per√ßu sur le plan long terme.
                        </div>
                    </div>
                </div>
            </section>

            <!-- √âTAPE 2 -->
            <section class="step" data-step="2">
                <div class="column">
                    <div class="card">
                        <h2>üìê √âtape 2 ‚Äì <span class="label">Planning Horizon (KDD IP2)</span></h2>
                        <small>On rapproche l‚Äôinduction : de l‚ÄôInduction Plan √† l‚ÄôInitial Request.</small>

                        <div style="height:10px"></div>
                        <div class="card-section-title">Entr√©es</div>

                        <div class="field-row">
                            <div class="field" style="flex:1 1 120px;">
                                <label for="phaseStep2">Phase</label>
                                <select id="phaseStep2">
                                    <option value="Induction Plan">3‚Äì18 mois ‚Äì Induction Plan</option>
                                    <option value="Initial Induction Request">3‚Äì6 mois ‚Äì Initial Request</option>
                                    <option value="Final Induction Request">0‚Äì3 mois ‚Äì Final Request</option>
                                </select>
                            </div>
                            <div class="field" style="flex:1 1 120px;">
                                <label for="monthsRemainingStep2">Mois restants</label>
                                <input type="number" id="monthsRemainingStep2" min="0" max="18" value="6" />
                            </div>
                        </div>

                        <div class="field">
                            <label for="probStep2">Probabilit√© d‚Äôinduction</label>
                            <input type="range" id="probStep2" min="50" max="100" value="80" />
                            <div class="inline-hint">
                                <span class="badge-proba">Probabilit√© : <span id="probStep2Label"
                                        class="value">80%</span></span>
                            </div>
                        </div>

                        <div class="pill-row">
                            <span class="pill soft-warn">‚è±Ô∏è 3‚Äì6 mois : ~80%</span>
                            <span class="pill soft-ok">üìå 0‚Äì3 mois : ~100%</span>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card">
                        <div class="card-section-title">R√©sultat (niveau de maturit√©)</div>
                        <div class="result-block" id="resultStep2">
                            Ajuste la phase et la probabilit√© pour visualiser le statut d‚Äôinduction.
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-section-title">Ajustements possibles</div>

                        <div class="field-row">
                            <div class="field" style="flex:1 1 120px;">
                                <label for="riskStep2">Risque op√©rationnel per√ßu</label>
                                <input type="range" id="riskStep2" min="1" max="5" value="2" />
                                <div class="inline-hint">1 = faible, 5 = tr√®s √©lev√©.</div>
                            </div>
                            <div class="field" style="flex:1 1 120px;">
                                <label for="confidenceStep2">Confiance planner</label>
                                <input type="range" id="confidenceStep2" min="1" max="5" value="4" />
                            </div>
                        </div>

                        <div class="result-block" id="adjustStep2">
                            Le planner pourra monter la phase en fonction du risque et de sa confiance m√©tier.
                        </div>
                    </div>
                </div>
            </section>

            <!-- √âTAPE 3 -->
            <section class="step" data-step="3">
                <div class="column">
                    <div class="card">
                        <h2>üß© √âtape 3 ‚Äì <span class="label">Planning Level & Dimensions (KDD IP3)</span></h2>
                        <small>On enrichit la demande : workscope et fen√™tre de slot atelier.</small>

                        <div style="height:10px"></div>
                        <div class="card-section-title">Entr√©es</div>

                        <div class="field">
                            <label for="workscopeStep3">Workscope pr√©vu</label>
                            <select id="workscopeStep3">
                                <option value="">Choisir‚Ä¶</option>
                                <option value="Inspection limit√©e">Inspection limit√©e</option>
                                <option value="Shop Visit standard">Shop Visit standard</option>
                                <option value="Overhaul complet">Overhaul complet</option>
                            </select>
                        </div>

                        <div class="field-row">
                            <div class="field" style="flex:1 1 120px;">
                                <label for="shopWindowStart">Fen√™tre slot ‚Äì d√©but</label>
                                <input type="month" id="shopWindowStart" />
                            </div>
                            <div class="field" style="flex:1 1 120px;">
                                <label for="shopWindowEnd">Fen√™tre slot ‚Äì fin</label>
                                <input type="month" id="shopWindowEnd" />
                            </div>
                        </div>

                        <div class="field">
                            <label for="durationStep3">Dur√©e estim√©e en atelier (jours)</label>
                            <input type="number" id="durationStep3" min="5" max="180" value="45" />
                        </div>

                        <div class="pill-row">
                            <span class="pill accent">üìÖ Fen√™tre d‚Äôinduction</span>
                            <span class="pill">Dur√©e estim√©e atelier</span>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card">
                        <div class="card-section-title">R√©sultat (proposition de slot)</div>
                        <div class="result-block" id="resultStep3">
                            Renseigne le workscope et la fen√™tre de slot pour g√©n√©rer une proposition.
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-section-title">Ajustements possibles</div>

                        <div class="field-row">
                            <div class="field" style="flex:1 1 120px;">
                                <label for="shopPrefStep3">Shop cible pr√©f√©r√©</label>
                                <select id="shopPrefStep3">
                                    <option value="">Laisser optimiser‚Ä¶</option>
                                    <option value="Shop X">Shop X ‚Äì Capacit√© LEAP</option>
                                    <option value="Shop Y">Shop Y ‚Äì Capacit√© CFM56</option>
                                </select>
                            </div>
                            <div class="field" style="flex:1 1 120px;">
                                <label for="flexibilityStep3">Flexibilit√© dates</label>
                                <input type="range" id="flexibilityStep3" min="0" max="4" value="2" />
                                <div class="inline-hint">0 = date fig√©e, 4 = tr√®s flexible.</div>
                            </div>
                        </div>

                        <div class="result-block" id="adjustStep3">
                            Le choix du shop et la flexibilit√© permettent d‚Äôoptimiser les capacit√©s atelier et la
                            promesse client.
                        </div>
                    </div>
                </div>
            </section>

            <!-- √âTAPE 4 -->
            <section class="step" data-step="4">
                <div class="column">
                    <div class="card">
                        <h2>üß† √âtape 4 ‚Äì <span class="label">Planner Adjustments (KDD IP8)</span></h2>
                        <small>Ici, l‚Äôhumain intervient pour arbitrer.</small>

                        <div style="height:10px"></div>
                        <div class="card-section-title">Entr√©es</div>

                        <div class="field">
                            <label for="reasonStep4">Motif d‚Äôajustement principal</label>
                            <select id="reasonStep4">
                                <option value="">Choisir‚Ä¶</option>
                                <option value="Capacit√© atelier">Capacit√© atelier</option>
                                <option value="Priorit√© client">Priorit√© client</option>
                                <option value="Probl√®me flotte / s√©curit√©">Probl√®me flotte / s√©curit√©</option>
                            </select>
                        </div>

                        <div class="field-row">
                            <div class="field" style="flex:1 1 120px;">
                                <label for="dateShiftStep4">D√©calage date (semaines)</label>
                                <input type="range" id="dateShiftStep4" min="-4" max="4" value="0" />
                                <div class="inline-hint">N√©gatif = plus t√¥t, positif = plus tard.</div>
                            </div>
                            <div class="field" style="flex:1 1 120px;">
                                <label for="priorityStep4">Nouvelle priorit√©</label>
                                <input type="range" id="priorityStep4" min="1" max="5" value="3" />
                            </div>
                        </div>

                        <div class="pill-row">
                            <span class="pill accent">üë§ Intervention planner</span>
                            <span class="pill">Trace des d√©cisions</span>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card">
                        <div class="card-section-title">R√©sultat (demande r√©vis√©e)</div>
                        <div class="result-block" id="resultStep4">
                            Configure un motif et un d√©calage pour voir la version r√©vis√©e de la demande.
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-section-title">Ajustements possibles</div>
                        <div class="field">
                            <label for="commentStep4">Commentaire planner (court)</label>
                            <input type="text" id="commentStep4"
                                placeholder="Ex : Slot avanc√© pour s√©curiser la saison √©t√©‚Ä¶" />
                        </div>
                        <div class="result-block" id="adjustStep4">
                            Ce commentaire sera visible par les r√¥les m√©tier li√©s √† la demande d‚Äôinduction.
                        </div>
                    </div>
                </div>
            </section>

            <!-- √âTAPE 5 -->
            <section class="step" data-step="5">
                <div class="column">
                    <div class="card">
                        <h2>‚úÖ √âtape 5 ‚Äì <span class="label">Create Induction Request Entry (KDD IP9)</span></h2>
                        <small>On fige la demande d‚Äôinduction confirm√©e en atelier.</small>

                        <div style="height:10px"></div>
                        <div class="card-section-title">Entr√©es</div>

                        <div class="field-row">
                            <div class="field" style="flex:1 1 120px;">
                                <label for="finalDateStep5">Date d‚Äôinduction confirm√©e</label>
                                <input type="month" id="finalDateStep5" />
                            </div>
                            <div class="field" style="flex:1 1 120px;">
                                <label for="finalShopStep5">Shop confirm√©</label>
                                <select id="finalShopStep5">
                                    <option value="">Choisir‚Ä¶</option>
                                    <option value="Shop X">Shop X</option>
                                    <option value="Shop Y">Shop Y</option>
                                    <option value="Shop Z">Shop Z</option>
                                </select>
                            </div>
                        </div>

                        <div class="field">
                            <label for="finalConfidenceStep5">Confiance globale (planner)</label>
                            <input type="range" id="finalConfidenceStep5" min="50" max="100" value="95" />
                            <div class="inline-hint">
                                <span class="badge-proba">Confiance : <span id="finalConfidenceStep5Label"
                                        class="value">95%</span></span>
                            </div>
                        </div>

                        <div class="pill-row">
                            <span class="pill soft-ok">üîí Demande fig√©e</span>
                            <span class="pill">Propagation vers planning & supply</span>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card">
                        <div class="card-section-title">R√©sultat (r√©capitulatif Induction Request)</div>
                        <div class="result-block" id="resultStep5">
                            Le r√©capitulatif complet s‚Äôaffichera ici √† partir des √©tapes pr√©c√©dentes.
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-section-title">Trace & synth√®se</div>
                        <div class="summary-chip-row" id="summaryChips">
                            <!-- chips dynamiques -->
                        </div>
                        <div class="summary-text" id="summaryText">
                            Tu peux utiliser ce bloc comme base pour une ‚ÄúInduction Request Entry‚Äù structur√©e (ex :
                            JSON, API, ticket).
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Footer navigation -->
        <div class="nav-footer">
            <small id="stepHint">√âtape 1/5 ‚Äì Cr√©ation du plan long terme.</small>
            <div class="buttons">
                <button class="btn-secondary" type="button" id="prevBtn" disabled>‚Üê Pr√©c√©dent</button>
                <button class="btn-primary" type="button" id="nextBtn">√âtape suivante ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        const FALLBACK_ENGINE_DATA = [
            {"model":"CFM56-5B","size":"Medium","color":"Gray","power":27000},
            {"model":"V2500-A5","size":"Medium","color":"Silver","power":33000},
            {"model":"CFM56-7B","size":"Large","color":"Black","power":31000},
            {"model":"LEAP-1A","size":"Large","color":"Blue","power":33000},
            {"model":"LEAP-1B","size":"Large","color":"Blue","power":35000},
            {"model":"PW1100G-JM","size":"Large","color":"Dark Gray","power":32000},
            {"model":"PW1500G","size":"Medium","color":"Dark Silver","power":27000},
            {"model":"GE90-115B","size":"X-Large","color":"Black","power":115000},
            {"model":"GEnx-1B","size":"X-Large","color":"Midnight Blue","power":92000},
            {"model":"GEnx-2B","size":"X-Large","color":"Charcoal","power":99000},
            {"model":"Trent 700","size":"X-Large","color":"Silver","power":75000},
            {"model":"Trent 900","size":"X-Large","color":"Pearl","power":80000},
            {"model":"Trent 1000","size":"X-Large","color":"Midnight Blue","power":91000},
            {"model":"Trent XWB-84","size":"X-Large","color":"Champagne","power":92000},
            {"model":"Trent XWB-97","size":"X-Large","color":"Ivory","power":97000},
            {"model":"CF6-80C2","size":"X-Large","color":"Gray","power":72000},
            {"model":"PW4000-112","size":"X-Large","color":"Royal Blue","power":62000},
            {"model":"PW4000-94","size":"X-Large","color":"Steel","power":63000},
            {"model":"CF34-10E","size":"Medium","color":"Blue","power":18000},
            {"model":"CF34-8C5","size":"Medium","color":"Gray","power":14000},
            {"model":"CF34-3B1","size":"Medium","color":"Silver","power":9000},
            {"model":"AE 3007A1","size":"Small","color":"White","power":8000},
            {"model":"AE 3007C2","size":"Small","color":"Ivory","power":9000},
            {"model":"CFM LEAP-1C","size":"X-Large","color":"Blue","power":35000},
            {"model":"JT8D-219","size":"Large","color":"Gray","power":17000},
            {"model":"JT9D-7R4","size":"X-Large","color":"Dark Gray","power":46000},
            {"model":"RB211-524","size":"X-Large","color":"Silver","power":60000},
            {"model":"RB211-535E4","size":"X-Large","color":"Titanium","power":52000},
            {"model":"PW2000","size":"Large","color":"Black","power":42000},
            {"model":"PW6000","size":"Large","color":"Dark Silver","power":42000},
            {"model":"CFM56-3C1","size":"Large","color":"Gray","power":22000},
            {"model":"CFM56-5C2","size":"Large","color":"Dark Gray","power":26000},
            {"model":"JT3D-3B","size":"Large","color":"Ivory","power":17000},
            {"model":"JT3D-7","size":"Large","color":"Gray","power":18000},
            {"model":"TurboFan X1","size":"Medium","color":"Matte Black","power":25000},
            {"model":"TurboFan X2","size":"Medium","color":"Matte White","power":26000},
            {"model":"TurboFan X3","size":"Large","color":"Gunmetal","power":30000},
            {"model":"TurboFan X4","size":"Large","color":"Bronze","power":28000},
            {"model":"EcoFan A300","size":"Medium","color":"Lime","power":20000},
            {"model":"EcoFan B400","size":"Medium","color":"Green","power":22000},
            {"model":"EcoFan C500","size":"Large","color":"Sea Blue","power":25000},
            {"model":"QuietJet Q1","size":"Medium","color":"Pearl","power":19000},
            {"model":"QuietJet Q2","size":"Medium","color":"Silver","power":18000},
            {"model":"SkyPower S1","size":"Large","color":"Blue","power":45000},
            {"model":"SkyPower S2","size":"Large","color":"Black","power":46000},
            {"model":"StormRunner R1","size":"X-Large","color":"Gunmetal","power":98000},
            {"model":"StormRunner R2","size":"X-Large","color":"Deep Blue","power":94000},
            {"model":"VectorPulse V1","size":"Medium","color":"Silver","power":31000},
            {"model":"VectorPulse V2","size":"Medium","color":"Titanium","power":32000}
        ];

        const state = {
            esn: "",
            engineType: "",
            client: "",
            module: "",
            probStep1: 50,
            horizonMonths: 12,
            priorityStep1: 3,
            shopPrefStep1: "",
            phaseStep2: "Induction Plan",
            monthsRemainingStep2: 6,
            probStep2: 80,
            riskStep2: 2,
            confidenceStep2: 4,
            workscopeStep3: "",
            shopWindowStart: "",
            shopWindowEnd: "",
            durationStep3: 45,
            shopPrefStep3: "",
            flexibilityStep3: 2,
            reasonStep4: "",
            dateShiftStep4: 0,
            priorityStep4: 3,
            commentStep4: "",
            finalDateStep5: "",
            finalShopStep5: "",
            finalConfidenceStep5: 95
        };

        let currentStep = 1;
        const totalSteps = 5;

        const stepElements = document.querySelectorAll(".step");
        const stepPills = document.querySelectorAll(".step-pill");
        const stepHint = document.getElementById("stepHint");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");

        /* Helpers */
        function showStep(step) {
            currentStep = step;
            stepElements.forEach(s => {
                s.classList.toggle("active", Number(s.dataset.step) === step);
            });

            stepPills.forEach(pill => {
                const index = Number(pill.dataset.stepPill);
                pill.classList.toggle("active", index === step);
                pill.classList.toggle("done", index < step);
            });

            prevBtn.disabled = step === 1;
            nextBtn.textContent = step === totalSteps ? "Terminer" : "√âtape suivante ‚Üí";

            const hints = {
                1: "√âtape 1/5 ‚Äì Cr√©ation du plan long terme.",
                2: "√âtape 2/5 ‚Äì Ajustement de l‚Äôhorizon et des probabilit√©s.",
                3: "√âtape 3/5 ‚Äì D√©finition du workscope et de la fen√™tre atelier.",
                4: "√âtape 4/5 ‚Äì Ajustements humains du planner.",
                5: "√âtape 5/5 ‚Äì Demande d‚Äôinduction confirm√©e."
            };
            stepHint.textContent = hints[step] || "";
        }

        function clamp(n, min, max) {
            return Math.min(Math.max(n, min), max);
        }

        /* √âtape 1 ‚Äì Events */
        const esnInput = document.getElementById("esn");
        const engineTypeInput = document.getElementById("engineType");
        const clientInput = document.getElementById("client");
        const moduleInput = document.getElementById("module");
        const probStep1Input = document.getElementById("probStep1");
        const probStep1Label = document.getElementById("probStep1Label");
        const horizonMonthsInput = document.getElementById("horizonMonths");
        const priorityStep1Input = document.getElementById("priorityStep1");
        const shopPrefStep1Input = document.getElementById("shopPrefStep1");
        const resultStep1 = document.getElementById("resultStep1");
        const adjustStep1 = document.getElementById("adjustStep1");

        async function loadEngineData() {
            try {
                const response = await fetch("data.json");
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                return await response.json();
            } catch (error) {
                console.warn("Impossible de charger data.json, utilisation des valeurs locales.", error);
                return FALLBACK_ENGINE_DATA;
            }
        }

        async function populateEngineTypes() {
            const data = await loadEngineData();
            const models = Array.from(new Set(
                data.map(item => item.model).filter(Boolean)
            )).sort((a, b) => a.localeCompare(b, "fr", { sensitivity: "base" }));
            const current = engineTypeInput.value;
            engineTypeInput.innerHTML =
                `<option value="">Choisir‚Ä¶</option>` +
                models.map(model => `<option value="${model}">${model}</option>`).join("");
            if (models.includes(current)) {
                engineTypeInput.value = current;
            }
        }

        populateEngineTypes();

        function updateStep1() {
            state.esn = esnInput.value;
            state.engineType = engineTypeInput.value;
            state.client = clientInput.value;
            state.module = moduleInput.value;
            state.probStep1 = Number(probStep1Input.value);
            state.horizonMonths = Number(horizonMonthsInput.value) || 12;
            state.priorityStep1 = Number(priorityStep1Input.value);
            state.shopPrefStep1 = shopPrefStep1Input.value;

            probStep1Label.textContent = state.probStep1 + "%";

            if (!state.esn || !state.engineType || !state.client) {
                resultStep1.innerHTML = "En attente de donn√©es‚Ä¶ renseigne ESN, moteur et client pour cr√©er une entr√©e d‚ÄôInduction Plan.";
            } else {
                resultStep1.innerHTML =
                    `Cr√©ation d‚Äôune entr√©e <span class="highlight">Induction Plan</span> pour <span class="highlight">${state.esn}</span> ` +
                    `(${state.engineType}, ${state.client}).<br>` +
                    `Horizon ‚âà <span class="highlight">${state.horizonMonths} mois</span>, probabilit√© estim√©e <span class="warn">${state.probStep1}%</span>.`;
            }

            let prioLabel = "moyenne";
            if (state.priorityStep1 <= 2) prioLabel = "basse";
            if (state.priorityStep1 >= 4) prioLabel = "√©lev√©e";

            const shopText = state.shopPrefStep1
                ? `Shop pr√©f√©rentiel : <span class="highlight">${state.shopPrefStep1}</span>.`
                : "Aucun shop pr√©f√©rentiel fix√© pour l‚Äôinstant.";

            adjustStep1.innerHTML =
                `Priorit√© client <span class="highlight">${state.priorityStep1}</span> (${prioLabel}). ${shopText}`;
        }

        [esnInput, engineTypeInput, clientInput, moduleInput,
            probStep1Input, horizonMonthsInput,
            priorityStep1Input, shopPrefStep1Input].forEach(el => {
                el.addEventListener("input", updateStep1);
            });

        /* √âtape 2 ‚Äì Events */
        const phaseStep2Input = document.getElementById("phaseStep2");
        const monthsRemainingStep2Input = document.getElementById("monthsRemainingStep2");
        const probStep2Input = document.getElementById("probStep2");
        const probStep2Label = document.getElementById("probStep2Label");
        const riskStep2Input = document.getElementById("riskStep2");
        const confidenceStep2Input = document.getElementById("confidenceStep2");
        const resultStep2 = document.getElementById("resultStep2");
        const adjustStep2 = document.getElementById("adjustStep2");

        function updateStep2() {
            state.phaseStep2 = phaseStep2Input.value;
            state.monthsRemainingStep2 = Number(monthsRemainingStep2Input.value) || 0;
            state.probStep2 = Number(probStep2Input.value);
            state.riskStep2 = Number(riskStep2Input.value);
            state.confidenceStep2 = Number(confidenceStep2Input.value);

            probStep2Label.textContent = state.probStep2 + "%";

            let statusLabel = "pr√©vision lointaine";
            if (state.phaseStep2.includes("Initial")) statusLabel = "demande initiale en pr√©paration";
            if (state.phaseStep2.includes("Final")) statusLabel = "demande finalis√©e en attente de confirmation";

            const colorClass = state.probStep2 >= 95 ? "ok" : state.probStep2 >= 80 ? "highlight" : "warn";

            resultStep2.innerHTML =
                `Phase actuelle : <span class="highlight">${state.phaseStep2}</span> ` +
                `(‚âà <span class="highlight">${state.monthsRemainingStep2} mois</span> restants).<br>` +
                `Statut : ${statusLabel}. Probabilit√© estim√©e <span class="${colorClass}">${state.probStep2}%</span>.`;

            let riskText = "faible";
            if (state.riskStep2 >= 4) riskText = "√©lev√©";
            else if (state.riskStep2 >= 3) riskText = "mod√©r√©";

            let confText = "prudente";
            if (state.confidenceStep2 >= 4) confText = "confiance forte";
            else if (state.confidenceStep2 <= 2) confText = "confiance faible";

            adjustStep2.innerHTML =
                `Risque op√©rationnel <span class="highlight">${state.riskStep2}</span> (${riskText}), ` +
                `et ${confText} du planner.<br>` +
                `Ces √©l√©ments permettront de d√©cider du passage en phase sup√©rieure ou non.`;
        }

        [phaseStep2Input, monthsRemainingStep2Input, probStep2Input,
            riskStep2Input, confidenceStep2Input].forEach(el => {
                el.addEventListener("input", updateStep2);
            });

        /* √âtape 3 ‚Äì Events */
        const workscopeStep3Input = document.getElementById("workscopeStep3");
        const shopWindowStartInput = document.getElementById("shopWindowStart");
        const shopWindowEndInput = document.getElementById("shopWindowEnd");
        const durationStep3Input = document.getElementById("durationStep3");
        const shopPrefStep3Input = document.getElementById("shopPrefStep3");
        const flexibilityStep3Input = document.getElementById("flexibilityStep3");
        const resultStep3 = document.getElementById("resultStep3");
        const adjustStep3 = document.getElementById("adjustStep3");

        function updateStep3() {
            state.workscopeStep3 = workscopeStep3Input.value;
            state.shopWindowStart = shopWindowStartInput.value;
            state.shopWindowEnd = shopWindowEndInput.value;
            state.durationStep3 = Number(durationStep3Input.value) || 0;
            state.shopPrefStep3 = shopPrefStep3Input.value;
            state.flexibilityStep3 = Number(flexibilityStep3Input.value);

            if (!state.workscopeStep3 || !state.shopWindowStart || !state.shopWindowEnd) {
                resultStep3.innerHTML = "Renseigne le workscope et la fen√™tre de slot pour g√©n√©rer une proposition structur√©e.";
            } else {
                resultStep3.innerHTML =
                    `Proposition de slot pour <span class="highlight">${state.workscopeStep3}</span> :<br>` +
                    `Fen√™tre <span class="highlight">${state.shopWindowStart}</span> ‚Üí <span class="highlight">${state.shopWindowEnd}</span>, ` +
                    `dur√©e estim√©e <span class="highlight">${state.durationStep3} jours</span>.`;
            }

            const flexLabels = ["fig√©e", "peu flexible", "moyennement flexible", "flexible", "tr√®s flexible"];
            const flexText = flexLabels[clamp(state.flexibilityStep3, 0, 4)] || "moyennement flexible";

            const shop3Text = state.shopPrefStep3
                ? `Shop cible : <span class="highlight">${state.shopPrefStep3}</span>. `
                : "Shop √† optimiser automatiquement. ";

            adjustStep3.innerHTML =
                `${shop3Text}Fen√™tre consid√©r√©e comme <span class="highlight">${flexText}</span> pour l‚Äôordonnancement des capacit√©s.`;
        }

        [workscopeStep3Input, shopWindowStartInput, shopWindowEndInput,
            durationStep3Input, shopPrefStep3Input, flexibilityStep3Input].forEach(el => {
                el.addEventListener("input", updateStep3);
            });

        /* √âtape 4 ‚Äì Events */
        const reasonStep4Input = document.getElementById("reasonStep4");
        const dateShiftStep4Input = document.getElementById("dateShiftStep4");
        const priorityStep4Input = document.getElementById("priorityStep4");
        const commentStep4Input = document.getElementById("commentStep4");
        const resultStep4 = document.getElementById("resultStep4");
        const adjustStep4 = document.getElementById("adjustStep4");

        function updateStep4() {
            state.reasonStep4 = reasonStep4Input.value;
            state.dateShiftStep4 = Number(dateShiftStep4Input.value);
            state.priorityStep4 = Number(priorityStep4Input.value);
            state.commentStep4 = commentStep4Input.value;

            let shiftText = "slot inchang√©";
            if (state.dateShiftStep4 > 0) shiftText = `slot d√©cal√© de +${state.dateShiftStep4} semaine(s)`;
            if (state.dateShiftStep4 < 0) shiftText = `slot avanc√© de ${Math.abs(state.dateShiftStep4)} semaine(s)`;

            const reasonText = state.reasonStep4
                ? `Motif principal : <span class="highlight">${state.reasonStep4}</span>. `
                : "";

            resultStep4.innerHTML =
                `${reasonText}D√©cision planner : ${shiftText}, ` +
                `priorit√© mise √† <span class="highlight">${state.priorityStep4}</span>.`;

            adjustStep4.innerHTML =
                state.commentStep4
                    ? `Commentaire planner : ¬´ <span class="highlight">${state.commentStep4}</span> ¬ª`
                    : "Ajoute un commentaire pour expliciter l‚Äôarbitrage aupr√®s des m√©tiers.";
        }

        [reasonStep4Input, dateShiftStep4Input, priorityStep4Input, commentStep4Input].forEach(el => {
            el.addEventListener("input", updateStep4);
        });

        /* √âtape 5 ‚Äì Events */
        const finalDateStep5Input = document.getElementById("finalDateStep5");
        const finalShopStep5Input = document.getElementById("finalShopStep5");
        const finalConfidenceStep5Input = document.getElementById("finalConfidenceStep5");
        const finalConfidenceStep5Label = document.getElementById("finalConfidenceStep5Label");
        const resultStep5 = document.getElementById("resultStep5");
        const summaryChips = document.getElementById("summaryChips");
        const summaryText = document.getElementById("summaryText");

        function updateStep5() {
            state.finalDateStep5 = finalDateStep5Input.value;
            state.finalShopStep5 = finalShopStep5Input.value;
            state.finalConfidenceStep5 = Number(finalConfidenceStep5Input.value);
            finalConfidenceStep5Label.textContent = state.finalConfidenceStep5 + "%";

            if (!state.finalDateStep5 || !state.finalShopStep5 || !state.esn) {
                resultStep5.innerHTML =
                    "Renseigne au minimum une date, un shop confirm√© et un ESN (√©tape 1) pour figer la demande d‚Äôinduction.";
                return;
            }

            resultStep5.innerHTML =
                `Demande d‚Äôinduction confirm√©e pour <span class="highlight">${state.esn}</span> ` +
                `(${state.engineType || "type moteur N/A"}, ${state.client || "client N/A"}).<br>` +
                `Shop confirm√© : <span class="highlight">${state.finalShopStep5}</span>, ` +
                `date d‚Äôinduction : <span class="highlight">${state.finalDateStep5}</span>.<br>` +
                `Confiance globale planner : <span class="ok">${state.finalConfidenceStep5}%</span>.`;

            summaryChips.innerHTML = "";
            const chips = [
                state.esn && `ESN : ${state.esn}`,
                state.engineType && `Moteur : ${state.engineType}`,
                state.client && `Client : ${state.client}`,
                state.workscopeStep3 && `Workscope : ${state.workscopeStep3}`,
                state.finalShopStep5 && `Shop : ${state.finalShopStep5}`,
                state.finalDateStep5 && `Induction : ${state.finalDateStep5}`,
                `Confiance : ${state.finalConfidenceStep5}%`
            ].filter(Boolean);

            chips.forEach(text => {
                const span = document.createElement("span");
                span.className = "summary-chip";
                span.textContent = text;
                summaryChips.appendChild(span);
            });

            const jsonPayload = {
                esn: state.esn || null,
                engineType: state.engineType || null,
                client: state.client || null,
                moduleOrVisitType: state.module || null,
                probability_initial: state.probStep1,
                horizon_months: state.horizonMonths,
                phase: state.phaseStep2,
                probability_phase: state.probStep2,
                workscope: state.workscopeStep3 || null,
                slot_window: {
                    start: state.shopWindowStart || null,
                    end: state.shopWindowEnd || null
                },
                duration_days: state.durationStep3,
                planner_adjustments: {
                    reason: state.reasonStep4 || null,
                    date_shift_weeks: state.dateShiftStep4,
                    new_priority: state.priorityStep4,
                    comment: state.commentStep4 || null
                },
                confirmed_request: {
                    shop: state.finalShopStep5,
                    induction_month: state.finalDateStep5,
                    confidence_planner: state.finalConfidenceStep5
                }
            };

            summaryText.textContent =
                "Payload Induction Request (exemple API) :\n" +
                JSON.stringify(jsonPayload, null, 2);
        }

        [finalDateStep5Input, finalShopStep5Input, finalConfidenceStep5Input].forEach(el => {
            el.addEventListener("input", updateStep5);
        });

        /* Navigation */
        prevBtn.addEventListener("click", () => {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        });

        nextBtn.addEventListener("click", () => {
            if (currentStep < totalSteps) {
                showStep(currentStep + 1);
            } else {
                alert("‚ú® Fin du parcours de d√©monstration. La demande d‚Äôinduction est fig√©e dans l‚Äôexemple.");
            }
        });

        // Un petit init pour pr√©-remplir les r√©sultats
        updateStep1();
        updateStep2();
        updateStep3();
        updateStep4();
        updateStep5();
    </script>
</body>

</html>
